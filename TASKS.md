# Project Tasks

*This file is synced with Clode Studio and Claude's native TodoWrite system.*  
*Last updated: 2025-08-10T19:45:00.000Z*

## Backlog (57)

- [ ] **Implement AuthGuard component**
  - ID: AUTH-004
  - Assignee: claude
  - Type: feature
  - Priority: medium
  - Description: Create route protection component for authenticated routes
  - Resources: Task: AUTH-003, File: packages/web-app/src/components/AuthGuard.tsx
- [ ] **Add loading states to auth forms**
  - ID: AUTH-008
  - Assignee: claude
  - Type: feature
  - Priority: medium
  - Description: Implement Tailwind Plus loading spinners and disable form during submission
  - Resources: Task: AUTH-005
- [ ] **Create ForgotPasswordForm with Tailwind Plus**
  - ID: AUTH-010
  - Assignee: claude
  - Type: feature
  - Priority: medium
  - Description: Build forgot password form using Tailwind Plus input components with email validation
  - Resources: Task: AUTH-005, File: packages/web-app/src/components/auth/ForgotPasswordForm.tsx
- [ ] **Implement password reset email**
  - ID: AUTH-011
  - Assignee: claude
  - Type: feature
  - Priority: medium
  - Description: Add Firebase sendPasswordResetEmail functionality (follow security best practices - don't reveal if email exists)
  - Resources: Task: AUTH-010
- [ ] **Create PasswordResetForm with Tailwind Plus**
  - ID: AUTH-012
  - Assignee: claude
  - Type: feature
  - Priority: medium
  - Description: Build password reset form using Tailwind Plus components with token validation and password strength indicator
  - Resources: Task: AUTH-011, File: packages/web-app/src/components/auth/PasswordResetForm.tsx
- [ ] **Add reset flow messaging**
  - ID: AUTH-013
  - Assignee: claude
  - Type: feature
  - Priority: medium
  - Description: Implement Tailwind Plus alert/notification components for password reset success/error messages
  - Resources: Task: AUTH-012
- [ ] **Style auth screens with Tailwind Plus**
  - ID: AUTH-014
  - Assignee: claude
  - Type: feature
  - Priority: low
  - Description: Apply Tailwind Plus design system for clean, professional auth screens suitable for all enterprise clients
  - Resources: Task: AUTH-005, File: packages/web-app/src/screens/Login.tsx
- [ ] **Implement session timeout**
  - ID: AUTH-018
  - Assignee: claude
  - Type: feature
  - Priority: low
  - Description: Add auto-logout after inactivity period (use Firebase default initially)
  - Resources: Task: AUTH-003
- [ ] **Add remember me functionality**
  - ID: AUTH-019
  - Assignee: claude
  - Type: feature
  - Priority: low
  - Description: Implement secure token storage for persistent login (nice-to-have)
  - Resources: Task: AUTH-003
- [ ] **Create auth E2E tests**
  - ID: AUTH-020
  - Assignee: claude
  - Type: feature
  - Priority: medium
  - Description: Write Playwright tests for login and password reset flows
  - Resources: Task: AUTH-013, File: packages/web-app/tests/e2e/auth.spec.ts
- [ ] **Migrate native-app-spike to main branch**
  - ID: NATIVE-001
  - Assignee: claude
  - Type: feature
  - Priority: high
  - Description: Merge native-app-spike branch after RBAC completion
  - Resources: Task: RBAC-027, File: packages/native-app/
- [ ] **Complete SPWA webpack build configuration**
  - ID: NATIVE-002
  - Assignee: claude
  - Type: feature
  - Priority: high
  - Description: Finalize webpack config for single-file Survey PWA bundle with Ford UI theming
  - Resources: Task: NATIVE-001, File: packages/web-app/src/survey-spa/webpack.config.js
- [ ] **Implement SPWA offline manifest and service worker**
  - ID: NATIVE-003
  - Assignee: claude
  - Type: feature
  - Priority: high
  - Description: Create service worker for offline caching and PWA manifest with Ford/Lincoln branding
  - Resources: Task: NATIVE-002, File: packages/web-app/src/survey-spa/
- [ ] **Bundle SPWA with native app assets**
  - ID: NATIVE-004
  - Assignee: claude
  - Type: feature
  - Priority: high
  - Description: Copy built SPWA to native app assets folder during build process
  - Resources: Task: NATIVE-003, File: packages/native-app/assets/survey-spa/
- [ ] **Complete NativeBridge implementation**
  - ID: NATIVE-005
  - Assignee: claude
  - Type: feature
  - Priority: high
  - Description: Finalize message passing between SPWA and React Native for survey lifecycle
  - Resources: Task: NATIVE-004, File: packages/web-app/src/survey-spa/bridge/NativeBridge.ts
- [ ] **Add offline survey queue management**
  - ID: NATIVE-006
  - Assignee: claude
  - Type: feature
  - Priority: medium
  - Description: Queue and sync survey responses when offline
  - Resources: Task: NATIVE-005, File: packages/native-app/src/services/sync-manager.ts
- [ ] **Implement biometric authentication**
  - ID: NATIVE-007
  - Assignee: claude
  - Type: feature
  - Priority: medium
  - Description: Add Face ID/Touch ID for kiosk mode security
  - Resources: Task: NATIVE-006
- [ ] **Integrate driver's license scanner with expo-camera**
  - ID: NATIVE-008
  - Assignee: claude
  - Type: feature
  - Priority: medium
  - Description: Implement camera-based DL scanning with OCR using expo-camera and vision APIs
  - Resources: Task: NATIVE-007, File: packages/native-app/src/services/dl-scanner.ts
- [ ] **Add kiosk mode lockdown**
  - ID: NATIVE-009
  - Assignee: claude
  - Type: feature
  - Priority: medium
  - Description: Implement guided access and app pinning for kiosk deployment
  - Resources: Task: NATIVE-008
- [ ] **Bundle Ford/Lincoln CSS themes in SPWA**
  - ID: NATIVE-010
  - Assignee: claude
  - Type: feature
  - Priority: medium
  - Description: Include Ford UI theme CSS in SPWA webpack bundle for offline theming
  - Resources: Task: NATIVE-005, File: packages/web-app/src/survey-spa/webpack.config.js
- [ ] **Configure EAS build profiles**
  - ID: NATIVE-011
  - Assignee: claude
  - Type: feature
  - Priority: high
  - Description: Set up Expo Application Services for iOS/Android builds
  - Resources: Task: NATIVE-010, File: packages/native-app/eas.json
- [ ] **Implement OTA updates**
  - ID: NATIVE-012
  - Assignee: claude
  - Type: feature
  - Priority: low
  - Description: Configure Expo Updates for over-the-air app updates
  - Resources: Task: NATIVE-011
- [ ] **Add crash reporting**
  - ID: NATIVE-013
  - Assignee: claude
  - Type: feature
  - Priority: low
  - Description: Integrate Sentry or similar for crash analytics
  - Resources: Task: NATIVE-011
- [ ] **Create native app E2E tests**
  - ID: NATIVE-014
  - Assignee: claude
  - Type: feature
  - Priority: medium
  - Description: Detox tests for critical native app flows
  - Resources: Task: NATIVE-012
- [ ] **Write native app documentation**
  - ID: NATIVE-015
  - Assignee: both
  - Type: documentation
  - Priority: medium
  - Description: Deployment guide for iOS/Android app stores
  - Resources: Task: NATIVE-014
- [ ] **Create iPad-specific layouts**
  - ID: NATIVE-016
  - Assignee: both
  - Type: feature
  - Priority: low
  - Description: Optimize UI for tablet form factors
  - Resources: Task: NATIVE-010
- [ ] **Implement SPWA hot reload for development**
  - ID: NATIVE-017
  - Assignee: claude
  - Type: feature
  - Priority: medium
  - Description: Set up webpack dev server for SPWA with React Native WebView hot reload
  - Resources: Task: NATIVE-002, File: packages/web-app/src/survey-spa/webpack.config.js
- [ ] **Add SPWA to CI/CD pipeline**
  - ID: NATIVE-018
  - Assignee: claude
  - Type: feature
  - Priority: high
  - Description: Add SPWA build step to GitHub Actions and Jenkins pipelines
  - Resources: Task: NATIVE-002, File: .github/workflows/
- [ ] **Create SPWA test harness**
  - ID: NATIVE-019
  - Assignee: claude
  - Type: feature
  - Priority: medium
  - Description: Build standalone HTML test page for SPWA WebView functionality
  - Resources: Task: NATIVE-005, File: packages/web-app/src/survey-spa/test/
- [ ] **Implement SPWA survey JSON validation**
  - ID: NATIVE-020
  - Assignee: claude
  - Type: feature
  - Priority: high
  - Description: Add runtime validation for survey JSON in SPWA to prevent crashes
  - Resources: Task: NATIVE-005, File: packages/web-app/src/survey-spa/SurveySPA.tsx
- [ ] **Research Tailwind Plus integration**
  - ID: RBAC-001
  - Assignee: claude
  - Type: research
  - Priority: high
  - Description: Evaluate Tailwind Plus components for admin console needs
  - Resources: knowledge: Tailwind Plus Documentation
- [ ] **Set up Firebase emulator for RBAC testing**
  - ID: RBAC-002
  - Assignee: claude
  - Type: feature
  - Priority: high
  - Description: Configure emulator with test data for TDD workflow
  - Resources: File: packages/firebase/emulator-config.json
- [ ] **Create admin console shell with Tailwind Plus**
  - ID: RBAC-003
  - Assignee: claude
  - Type: feature
  - Priority: high
  - Description: Implement Application Shell with sidebar navigation (Events, Users, Groups, Audit Logs)
  - Resources: Task: RBAC-001, File: packages/web-app/src/layouts/AdminLayout.tsx
- [ ] **Write failing tests for admin shell**
  - ID: RBAC-004
  - Assignee: claude
  - Type: feature
  - Priority: high
  - Description: TDD - Create visual/unit tests for sidebar layout before implementation
  - Resources: Task: RBAC-003, File: packages/web-app/src/layouts/__tests__/
- [ ] **Migrate existing event screens to admin shell**
  - ID: RBAC-005
  - Assignee: claude
  - Type: refactor
  - Priority: high
  - Description: Move current event management into new admin layout
  - Resources: Task: RBAC-003, File: packages/web-app/src/screens/admin/
- [ ] **Create users list with data table**
  - ID: RBAC-006
  - Assignee: claude
  - Type: feature
  - Priority: medium
  - Description: Implement sortable, filterable users table with Tailwind Plus
  - Resources: Task: RBAC-005, File: packages/web-app/src/screens/admin/Users.tsx
- [ ] **Add server-side pagination for lists**
  - ID: RBAC-007
  - Assignee: claude
  - Type: feature
  - Priority: medium
  - Description: Implement efficient pagination for events and users
  - Resources: Task: RBAC-006
- [ ] **Create Groups CRUD UI**
  - ID: RBAC-008
  - Assignee: claude
  - Type: feature
  - Priority: medium
  - Description: Implement create/edit/delete groups with Tailwind Plus forms
  - Resources: Task: RBAC-007, File: packages/web-app/src/screens/admin/Groups.tsx
- [ ] **Implement group membership multi-select**
  - ID: RBAC-009
  - Assignee: claude
  - Type: feature
  - Priority: medium
  - Description: Add/remove users to groups with bulk actions support
  - Resources: Task: RBAC-008
- [ ] **Create event-group assignment UI**
  - ID: RBAC-010
  - Assignee: claude
  - Type: feature
  - Priority: medium
  - Description: Assign events to multiple groups from event detail page
  - Resources: Task: RBAC-008, Task: RBAC-009
- [ ] **Write group management integration tests**
  - ID: RBAC-011
  - Assignee: claude
  - Type: feature
  - Priority: high
  - Description: Test group CRUD operations with Firebase emulator
  - Resources: Task: RBAC-010
- [ ] **Create role assignment Cloud Function**
  - ID: RBAC-012
  - Assignee: claude
  - Type: feature
  - Priority: high
  - Description: Function to set admin/client custom claims with authorization checks
  - Resources: File: packages/firebase/functions/src/rbac/
- [ ] **Implement Firestore security rules for groups**
  - ID: RBAC-013
  - Assignee: claude
  - Type: feature
  - Priority: high
  - Description: Rules enforcing group-based access to events and data
  - Resources: Task: RBAC-012, File: packages/firebase/firestore.rules
- [ ] **Create migration script for existing users**
  - ID: RBAC-014
  - Assignee: claude
  - Type: feature
  - Priority: high
  - Description: Backfill roles and group assignments with seed list
  - Resources: Task: RBAC-012, Task: RBAC-013
- [ ] **Write security rules test suite**
  - ID: RBAC-015
  - Assignee: claude
  - Type: feature
  - Priority: high
  - Description: Test admin/client access patterns with emulator
  - Resources: Task: RBAC-013
- [ ] **Create group membership Cloud Functions**
  - ID: RBAC-016
  - Assignee: claude
  - Type: feature
  - Priority: high
  - Description: Functions for complex multi-group membership checks
  - Resources: Task: RBAC-012
- [ ] **Create audit log data model**
  - ID: RBAC-017
  - Assignee: claude
  - Type: feature
  - Priority: medium
  - Description: Firestore collection for audit events with proper indexes
  - Resources: Task: RBAC-016
- [ ] **Implement audit logging Cloud Functions**
  - ID: RBAC-018
  - Assignee: claude
  - Type: feature
  - Priority: medium
  - Description: Log role changes, group assignments, and access attempts
  - Resources: Task: RBAC-017
- [ ] **Create audit log viewer UI**
  - ID: RBAC-019
  - Assignee: claude
  - Type: feature
  - Priority: medium
  - Description: Filterable audit log with date range and export to CSV
  - Resources: Task: RBAC-018, File: packages/web-app/src/screens/admin/AuditLogs.tsx
- [ ] **Implement log retention policy**
  - ID: RBAC-020
  - Assignee: claude
  - Type: feature
  - Priority: low
  - Description: Cloud Function to delete logs older than 1 year
  - Resources: Task: RBAC-018
- [ ] **Write audit logging tests**
  - ID: RBAC-021
  - Assignee: claude
  - Type: feature
  - Priority: medium
  - Description: Test audit event creation and retention in emulator
  - Resources: Task: RBAC-020
- [ ] **Run full E2E test suite with Playwright**
  - ID: RBAC-022
  - Assignee: claude
  - Type: feature
  - Priority: high
  - Description: Test admin login, group assignment, event visibility flows
  - Resources: Task: RBAC-021
- [ ] **Perform accessibility audit**
  - ID: RBAC-023
  - Assignee: both
  - Type: feature
  - Priority: medium
  - Description: Run axe-core checks and fix AA compliance issues
  - Resources: Task: RBAC-022
- [ ] **Create visual regression test suite**
  - ID: RBAC-024
  - Assignee: claude
  - Type: feature
  - Priority: low
  - Description: Playwright snapshots for key admin screens
  - Resources: Task: RBAC-022
- [ ] **Configure Jenkins pipeline**
  - ID: RBAC-025
  - Assignee: claude
  - Type: feature
  - Priority: high
  - Description: Set up CI/CD for Mac Mini agents with test sharding
  - Resources: Task: RBAC-024
- [ ] **Write user documentation**
  - ID: RBAC-026
  - Assignee: both
  - Type: documentation
  - Priority: medium
  - Description: Admin guide and client user instructions
  - Resources: Task: RBAC-025
- [ ] **Create migration checklist**
  - ID: RBAC-027
  - Assignee: both
  - Type: documentation
  - Priority: high
  - Description: Step-by-step production deployment guide
  - Resources: Task: RBAC-026

## To Do (0)

## In Progress (0)

## Completed (11)

- [x] ~~Create auth service abstraction layer~~ ✅
  - ~~ID: AUTH-000~~
  - ~~Assignee: claude~~
  - ~~Type: feature~~
  - ~~Priority: high~~
  - ~~Description: Create service layer abstraction over Firebase Auth to decouple UI from Firebase SDK - enables future auth provider changes~~
  - ~~Resources: File: packages/web-app/src/services/authService.ts~~
  - ~~Completed: 2025-08-10~~

- [x] ~~Remove FirebaseUI dependency~~
  - ~~ID: AUTH-001~~
  - ~~Assignee: claude~~
  - ~~Type: refactor~~
  - ~~Priority: high~~
  - ~~Description: Remove firebaseui package and clean up package.json (NOTE: Phone auth being removed)~~
  - ~~Resources: File: packages/web-app/package.json~~

- [x] ~~Migrate to modern Firebase SDK~~ ✅
  - ~~ID: AUTH-002~~
  - ~~Assignee: claude~~
  - ~~Type: refactor~~
  - ~~Priority: high~~
  - ~~Description: Replace Firebase compat imports with modern v10 SDK - keep all Firebase Auth methods, just update import syntax~~
  - ~~Resources: Task: AUTH-001, File: packages/web-app/src/screens/Login.tsx~~
  - ~~Completed: 2025-08-10~~

- [x] ~~Create AuthContext provider~~ ✅
  - ~~ID: AUTH-003~~
  - ~~Assignee: claude~~
  - ~~Type: feature~~
  - ~~Priority: high~~
  - ~~Description: Implement centralized auth state management wrapping Firebase Auth's onAuthStateChanged() and currentUser~~
  - ~~Resources: Task: AUTH-002, File: packages/web-app/src/contexts/AuthContext.tsx~~
  - ~~Completed: 2025-08-10~~

- [x] ~~Create LoginForm component with Tailwind Plus~~
  - ~~ID: AUTH-005~~
  - ~~Assignee: claude~~
  - ~~Type: feature~~
  - ~~Priority: high~~
  - ~~Description: Build custom login form UI that calls Firebase Auth signInWithEmailAndPassword() - separation of presentation from auth logic~~
  - ~~Resources: Task: AUTH-002, File: packages/web-app/src/components/auth/LoginForm.tsx~~

- [x] ~~Add email/password validation~~ ✅
  - ~~ID: AUTH-006~~
  - ~~Assignee: claude~~
  - ~~Type: feature~~
  - ~~Priority: high~~
  - ~~Description: Implement yup schema validation for login credentials with strong password requirements~~
  - ~~Resources: Task: AUTH-005, File: packages/web-app/src/schemas/authSchemas.ts~~
  - ~~Completed: 2025-08-10~~

- [x] ~~Implement secure login error handling~~ ✅
  - ~~ID: AUTH-007~~
  - ~~Assignee: claude~~
  - ~~Type: feature~~
  - ~~Priority: high~~
  - ~~Description: Add error messages following security best practices - avoid revealing whether email exists, use generic "Invalid credentials" messages, prevent user enumeration attacks~~
  - ~~Resources: Task: AUTH-005~~
  - ~~Completed: 2025-08-10~~

- [x] ~~Preserve CloudFront cookie integration~~ ✅
  - ~~ID: AUTH-009~~
  - ~~Assignee: claude~~
  - ~~Type: feature~~
  - ~~Priority: high~~
  - ~~Description: Ensure CloudFront access cookies work with new auth flow~~
  - ~~Resources: Task: AUTH-005, File: packages/web-app/src/services/cloudFrontAuth.ts~~
  - ~~Completed: 2025-08-10~~

- [x] ~~Implement WCAG AA compliance~~ ✅
  - ~~ID: AUTH-015~~
  - ~~Assignee: both~~
  - ~~Type: feature~~
  - ~~Priority: high~~
  - ~~Description: Add proper labels, ARIA attributes, and contrast ratios (legal requirement for enterprise)~~
  - ~~Resources: Task: AUTH-005~~
  - ~~Completed: 2025-08-10~~

- [x] ~~Add keyboard navigation support~~ ✅
  - ~~ID: AUTH-016~~
  - ~~Assignee: claude~~
  - ~~Type: feature~~
  - ~~Priority: high~~
  - ~~Description: Implement focus management and keyboard shortcuts for accessibility~~
  - ~~Resources: Task: AUTH-015~~
  - ~~Completed: 2025-08-10~~

- [x] ~~Create responsive auth layouts~~ ✅
  - ~~ID: AUTH-017~~
  - ~~Assignee: claude~~
  - ~~Type: feature~~
  - ~~Priority: high~~
  - ~~Description: Optimize auth screens for mobile and tablet devices (field users need mobile access)~~
  - ~~Resources: Task: AUTH-005~~
  - ~~Completed: 2025-08-10~~

---
*To update tasks, use the Kanban board in Clode Studio, ask Claude to modify this file, or use Claude's native TodoWrite system.*
